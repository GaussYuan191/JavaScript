<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>手写js</title>
</head>
<body>
    <script>
    var log = console.log
    // JavaScript 基础
    // 1.手写 Object.create
    // 思路：将传入的对象最为原型
 
    // function newCreate (obj) {
    //     function F() {}
    //     F.prototype = obj;
    //     return new F();
    // } 
    // log('原生', Object.create(Array))
    // log('手写', newCreate(Array))
    // 2.手写instanceof
    // 获取类型的原型 获取对象的原型 循环判断对象的原型和类型的原型，是否相等
    // function myInstanceof(left, right) {
    //     let proto = Object.getPrototypeOf(left) //获取对象的原型
    //     let prototype = right.prototype;  //获取构造函数的prototype 对象
    //     log(proto, prototype)
    //     //判断构造函数的prototype 对象是否在对象的原型链上
    //     while (true) {
    //         if (!proto) return false;
    //         if (proto === prototype) return true;
    //         // proto = Object.getPrototypeOf(proto);

    //         proto = proto.__proto__
    //     }
        
    // }
    // log(myInstanceof(new Array, Array))
    // log(new Array instanceof Array)
    // 3.手写new 操作符
    // 在调用new的过程中会发生以下四件事
    // a:创建一个空对象
    // b:设置原型，将对象的原型设置成函数的prototype对象
    // c:让函数的this指向这个对象，执行构造函数的代码(为这个新对象添加属性)
    // d:判断函数的返回值类型，如果是值的类型，返回创建的对象。如果是引用类型，就返回引用类型
    // function objectFactory() {
    //     let newObj = null;
    //     let constructor = Array.prototype.shift.call(arguments);
    //     let result = null;
    //     log (arguments)
    //     log (constructor.prototype)
    //     // 判断参数是否为一个函数
    //     if (typeof constructor !== 'function') {
    //         throw new Error("type error")
    //         return;
    //     }
    //     // 创建一个空对象，对象的原型为构造函数的prototype 对象
    //     newObject = Object.create(constructor.prototype);
    //     // 将this指向新建对象，并执行函数
    //     result = constructor.apply(newObj, arguments)
    //     // 判断返回的对象
    //     let flag = result && (typeof result === "object" || typeof result === 'function');
    //     // 判断返回的结果
    //     return flag ? result : newObj;
    // }
    // log (objectFactory(String))
    // 数据处理
    // 1.实现日期格式化函数
        const dateFormat = (dateInput, format)=>{
        var day = dateInput.getDate() 
        var month = dateInput.getMonth() + 1  
        var year = dateInput.getFullYear()   
        format = format.replace(/yyyy/, year)
        format = format.replace(/MM/,month)
        format = format.replace(/dd/,day)
        return format
    }
    log(dateFormat(new Date('2020-12-01'), 'yyyy/MM/dd')) // 2020/12/01
    dateFormat(new Date('2020-04-01'), 'yyyy/MM/dd') // 2020/04/01
    log(dateFormat(new Date('2020-04-01'), 'yyyy年MM月dd日')) // 2020年04月01日
    </script>
</body>
</html>